<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Style Isolation Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .route-simulator {
            margin: 10px 0;
            padding: 10px;
            background: #e8f4fd;
            border-radius: 4px;
            border-left: 4px solid #007acc;
        }
        .element-test {
            margin: 15px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            margin: 5px;
            padding: 8px 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
        }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
        .info { background: #d1ecf1; border-color: #bee5eb; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¯ CSSæ ·å¼éš”ç¦»æµ‹è¯•</h1>
        <p>æ­¤é¡µé¢ç”¨äºæµ‹è¯•ä¸åŒè·¯ç”±ä¸‹çš„CSSæ ·å¼éš”ç¦»æ•ˆæœ</p>
        
        <div class="route-simulator">
            <strong>å½“å‰æ¨¡æ‹Ÿè·¯ç”±:</strong> <span id="currentRoute">/</span>
            <br>
            <button onclick="simulateRoute('/')">æ ¹è·¯å¾„</button>
            <button onclick="simulateRoute('/login')">ç™»å½•é¡µé¢</button>
            <button onclick="simulateRoute('/home')">ä¸»é¡µ</button>
            <button onclick="simulateRoute('/chat/1')">èŠå¤©é¡µé¢</button>
            <button onclick="simulateRoute('/demo')">Demoé¡µé¢</button>
        </div>
        
        <div class="element-test">
            <h3>é¢‘é“åˆ—è¡¨å…ƒç´ æµ‹è¯•</h3>
            <div class="channel-item">
                <div class="channel-icon">ğŸ“±</div>
                <div class="channel-content">
                    <div class="channel-name">
                        <span class="name-text">æµ‹è¯•é¢‘é“</span>
                    </div>
                    <div class="last-message">æœ€åä¸€æ¡æ¶ˆæ¯é¢„è§ˆ</div>
                </div>
            </div>
            <p id="channelTest" class="info">é¢‘é“æ ·å¼åº”è¯¥åªåœ¨ä¸»é¡µå’ŒèŠå¤©é¡µé¢ç”Ÿæ•ˆ</p>
        </div>
        
        <div class="element-test">
            <h3>Discordæ¶ˆæ¯å…ƒç´ æµ‹è¯•</h3>
            <div class="discord-message">
                <div class="message-avatar-slot">ğŸ‘¤</div>
                <div class="sender-name">ç”¨æˆ·å</div>
                <div class="message-text">è¿™æ˜¯ä¸€æ¡Discordé£æ ¼çš„æ¶ˆæ¯</div>
                <div class="message-timestamp">åˆšåˆš</div>
            </div>
            <p id="messageTest" class="info">Discordæ¶ˆæ¯æ ·å¼åº”è¯¥åªåœ¨èŠå¤©ç›¸å…³é¡µé¢ç”Ÿæ•ˆ</p>
        </div>
        
        <div class="element-test">
            <h3>ä»£ç é«˜äº®å…ƒç´ æµ‹è¯•</h3>
            <div class="enhanced-code-container">
                <div class="code-header-enhanced">
                    <span class="language-indicator">JavaScript</span>
                </div>
                <div class="code-content-area">
                    <pre class="hljs">console.log('Hello World');</pre>
                </div>
            </div>
            <p id="codeTest" class="info">ä»£ç é«˜äº®æ ·å¼åº”è¯¥åªåœ¨èŠå¤©ã€Demoã€Debugé¡µé¢ç”Ÿæ•ˆ</p>
        </div>
        
        <div class="element-test">
            <h3>ç™»å½•ä¿æŠ¤å…ƒç´ æµ‹è¯•</h3>
            <div class="mt-8 text-center">
                <button>Developer Accounts æŒ‰é’®</button>
            </div>
            <div class="dev-accounts-floating-container">
                <div class="dev-accounts-dropdown">ç™»å½•Modalå†…å®¹</div>
            </div>
            <p id="loginTest" class="info">ç™»å½•ä¿æŠ¤æ ·å¼åº”è¯¥åªåœ¨ç™»å½•é¡µé¢ç”Ÿæ•ˆ</p>
        </div>
    </div>

    <script>
        function simulateRoute(route) {
            // æ›´æ–°bodyçš„data-routeå±æ€§
            document.body.setAttribute('data-route', route);
            
            // æ¸…é™¤æ‰€æœ‰é¡µé¢ç±»
            document.body.className = document.body.className.replace(/page-\w+/g, '');
            document.body.classList.remove('login-page', 'home-page', 'chat-page', 'demo-page', 'debug-page');
            document.body.classList.remove('has-sidebar', 'has-discord-messages', 'has-code-content', 'has-cjk-content');
            
            // æ ¹æ®è·¯ç”±æ·»åŠ ç›¸åº”çš„ç±»
            switch(route) {
                case '/login':
                    document.body.classList.add('page-login', 'login-page');
                    break;
                case '/home':
                    document.body.classList.add('page-home', 'home-page', 'has-sidebar', 'has-cjk-content');
                    break;
                case '/chat/1':
                    document.body.classList.add('page-chat', 'chat-page', 'has-sidebar', 'has-discord-messages', 'has-code-content', 'has-cjk-content');
                    break;
                case '/demo':
                    document.body.classList.add('page-demo', 'demo-page', 'has-code-content');
                    break;
                default:
                    document.body.classList.add('page-root');
            }
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('currentRoute').textContent = route;
            
            // æ£€æŸ¥æ ·å¼åº”ç”¨æƒ…å†µ
            setTimeout(checkStyleApplication, 100);
        }
        
        function checkStyleApplication() {
            const route = document.body.getAttribute('data-route');
            
            // æ£€æŸ¥é¢‘é“åˆ—è¡¨æ ·å¼
            const channelItem = document.querySelector('.channel-item');
            const channelHasStyles = window.getComputedStyle(channelItem).display === 'flex';
            const channelShouldHaveStyles = route === '/home' || route.startsWith('/chat');
            updateTestResult('channelTest', channelHasStyles === channelShouldHaveStyles, 
                `é¢‘é“æ ·å¼${channelHasStyles ? 'å·²åº”ç”¨' : 'æœªåº”ç”¨'} (${channelShouldHaveStyles ? 'åº”è¯¥' : 'ä¸åº”è¯¥'}åº”ç”¨)`);
            
            // æ£€æŸ¥Discordæ¶ˆæ¯æ ·å¼
            const discordMessage = document.querySelector('.discord-message');
            const messageHasStyles = window.getComputedStyle(discordMessage).position === 'relative';
            const messageShouldHaveStyles = route === '/home' || route.startsWith('/chat');
            updateTestResult('messageTest', messageHasStyles === messageShouldHaveStyles,
                `æ¶ˆæ¯æ ·å¼${messageHasStyles ? 'å·²åº”ç”¨' : 'æœªåº”ç”¨'} (${messageShouldHaveStyles ? 'åº”è¯¥' : 'ä¸åº”è¯¥'}åº”ç”¨)`);
            
            // æ£€æŸ¥ä»£ç é«˜äº®æ ·å¼
            const codeContainer = document.querySelector('.enhanced-code-container');
            const codeHasStyles = window.getComputedStyle(codeContainer).fontFamily.includes('mono');
            const codeShouldHaveStyles = route.startsWith('/chat') || route === '/demo' || route === '/debug';
            updateTestResult('codeTest', codeHasStyles === codeShouldHaveStyles,
                `ä»£ç æ ·å¼${codeHasStyles ? 'å·²åº”ç”¨' : 'æœªåº”ç”¨'} (${codeShouldHaveStyles ? 'åº”è¯¥' : 'ä¸åº”è¯¥'}åº”ç”¨)`);
            
            // æ£€æŸ¥ç™»å½•ä¿æŠ¤æ ·å¼
            const loginButton = document.querySelector('.mt-8.text-center button');
            const loginHasStyles = window.getComputedStyle(loginButton).zIndex === '100';
            const loginShouldHaveStyles = route === '/login';
            updateTestResult('loginTest', loginHasStyles === loginShouldHaveStyles,
                `ç™»å½•æ ·å¼${loginHasStyles ? 'å·²åº”ç”¨' : 'æœªåº”ç”¨'} (${loginShouldHaveStyles ? 'åº”è¯¥' : 'ä¸åº”è¯¥'}åº”ç”¨)`);
        }
        
        function updateTestResult(elementId, isCorrect, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = isCorrect ? 'success' : 'error';
        }
        
        // åˆå§‹åŒ–
        simulateRoute('/');
    </script>
</body>
</html> 