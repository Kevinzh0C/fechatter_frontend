<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¶ˆæ¯ä¿®å¤éªŒè¯ - Fechatter</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background: #f8f9fa; }
        .card { background: white; border-radius: 12px; padding: 24px; margin: 20px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .status { padding: 12px; border-radius: 8px; margin: 10px 0; font-weight: 500; }
        .success { background: #d1edff; color: #0969da; }
        .error { background: #ffe6e6; color: #d73a49; }
        .warning { background: #fff3cd; color: #856404; }
        .btn { padding: 12px 24px; background: #0969da; color: white; border: none; border-radius: 6px; cursor: pointer; margin: 10px 5px; font-weight: bold; }
        .btn:hover { background: #0550ae; }
        .code { background: #f6f8fa; border: 1px solid #d1d9e0; border-radius: 6px; padding: 16px; font-family: monospace; font-size: 14px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>ğŸ” æ¶ˆæ¯ä¿®å¤éªŒè¯å·¥å…·</h1>
    
    <div class="card">
        <h2>âœ… å·²åº”ç”¨çš„ä¿®å¤</h2>
        <div class="status success">
            <strong>SimpleMessageList.vue</strong> - ç§»é™¤äº†å®¹å™¨é«˜åº¦é™åˆ¶ (height: 100% â†’ min-height: 100vh)
        </div>
        <div class="status success">
            <strong>MessageItem.vue</strong> - æ·»åŠ äº†å®‰å…¨å†…å®¹æ¸²æŸ“ (safeFormattedContent)
        </div>
    </div>
    
    <div class="card">
        <h2>ğŸ§ª å¿«é€ŸéªŒè¯æ­¥éª¤</h2>
        <ol>
            <li><strong>åˆ·æ–°é¡µé¢</strong> - é‡æ–°åŠ è½½Fechatteråº”ç”¨</li>
            <li><strong>è¿›å…¥èŠå¤©é¢‘é“</strong> - é€‰æ‹©ä»»æ„é¢‘é“</li>
            <li><strong>æ£€æŸ¥æ¶ˆæ¯æ˜¾ç¤º</strong> - ç¡®è®¤æ¶ˆæ¯å†…å®¹å¯è§</li>
            <li><strong>æ»šåŠ¨æµ‹è¯•</strong> - å‘ä¸Šæ»šåŠ¨æŸ¥çœ‹å†å²æ¶ˆæ¯</li>
        </ol>
        
        <button onclick="showVerificationScript()" class="btn">ğŸ“‹ è·å–æ§åˆ¶å°éªŒè¯è„šæœ¬</button>
        <div id="verificationScript" style="display: none;">
            <h3>åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</h3>
            <div class="code">
// éªŒè¯æ¶ˆæ¯ä¿®å¤æ•ˆæœ
const messageElements = document.querySelectorAll('[data-message-id]');
console.log('ğŸ” æ£€æµ‹åˆ°', messageElements.length, 'ä¸ªæ¶ˆæ¯å…ƒç´ ');

let visibleCount = 0;
let hasContentCount = 0;

messageElements.forEach((el, index) => {
    const id = el.getAttribute('data-message-id');
    const textEl = el.querySelector('.message-text');
    const isVisible = textEl && getComputedStyle(textEl).display !== 'none';
    const hasContent = textEl && textEl.innerHTML.trim().length > 0;
    
    if (isVisible) visibleCount++;
    if (hasContent) hasContentCount++;
    
    console.log(`æ¶ˆæ¯ ${id}:`, {
        element: 'âœ…',
        textContainer: textEl ? 'âœ…' : 'âŒ',
        visible: isVisible ? 'âœ…' : 'âŒ',
        hasContent: hasContent ? 'âœ…' : 'âŒ',
        content: textEl?.innerHTML.substring(0, 50) + '...'
    });
});

console.log('ğŸ“Š éªŒè¯ç»“æœ:', {
    æ€»æ¶ˆæ¯æ•°: messageElements.length,
    å¯è§æ¶ˆæ¯æ•°: visibleCount,
    æœ‰å†…å®¹æ¶ˆæ¯æ•°: hasContentCount,
    ä¿®å¤æˆåŠŸç‡: Math.round((hasContentCount / messageElements.length) * 100) + '%'
});

if (hasContentCount === messageElements.length) {
    console.log('ğŸ‰ ä¿®å¤æˆåŠŸï¼æ‰€æœ‰æ¶ˆæ¯éƒ½æ­£å¸¸æ˜¾ç¤º');
} else {
    console.log('âš ï¸ éƒ¨åˆ†æ¶ˆæ¯ä»æœ‰é—®é¢˜ï¼Œå¯èƒ½éœ€è¦é¢å¤–ä¿®å¤');
}
            </div>
        </div>
    </div>
    
    <div class="card">
        <h2>ğŸš¨ å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨</h2>
        <p>å¦‚æœæ¶ˆæ¯å†…å®¹ä»ç„¶ä¸æ˜¾ç¤ºï¼Œå¯èƒ½æ˜¯ä»¥ä¸‹åŸå› ï¼š</p>
        <ul>
            <li><strong>æµè§ˆå™¨ç¼“å­˜</strong> - å°è¯•ç¡¬åˆ·æ–° (Ctrl+Shift+R)</li>
            <li><strong>Vueç»„ä»¶çŠ¶æ€</strong> - æ¶ˆæ¯æ•°æ®æœ¬èº«ç¼ºå¤±</li>
            <li><strong>CSSå†²çª</strong> - å…¶ä»–æ ·å¼è¦†ç›–äº†ä¿®å¤</li>
        </ul>
        
        <button onclick="showEmergencyFix()" class="btn" style="background: #dc3545;">ğŸš¨ ç´§æ€¥ä¿®å¤</button>
        <div id="emergencyFix" style="display: none;">
            <h3>ç´§æ€¥CSSä¿®å¤ï¼ˆåœ¨æ§åˆ¶å°æ‰§è¡Œï¼‰ï¼š</h3>
            <div class="code">
// å¼ºåˆ¶æ˜¾ç¤ºæ‰€æœ‰æ¶ˆæ¯å†…å®¹
const style = document.createElement('style');
style.innerHTML = `
[data-message-id] .message-text {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    color: #374151 !important;
    font-size: 14px !important;
    line-height: 1.5 !important;
    min-height: 1em !important;
}

[data-message-id] .message-text:empty::before {
    content: "[æ¶ˆæ¯å†…å®¹]" !important;
    color: #6b7280 !important;
    font-style: italic !important;
}
`;
document.head.appendChild(style);
console.log('ğŸ¨ å·²åº”ç”¨ç´§æ€¥CSSä¿®å¤');
            </div>
        </div>
    </div>
    
    <div class="card">
        <h2>ğŸ“ˆ é¢„æœŸæ”¹è¿›</h2>
        <div class="status success">
            <strong>ä¿®å¤å‰</strong>ï¼šåªæ˜¾ç¤ºæ—¶é—´åˆ†éš”ç¬¦ï¼Œæ¶ˆæ¯å†…å®¹ä¸å¯è§<br>
            <strong>ä¿®å¤å</strong>ï¼šæ‰€æœ‰æ¶ˆæ¯å†…å®¹æ­£å¸¸æ˜¾ç¤ºï¼Œæ”¯æŒæ»šåŠ¨æŸ¥çœ‹å†å²
        </div>
    </div>

    <script>
        function showVerificationScript() {
            const div = document.getElementById('verificationScript');
            div.style.display = div.style.display === 'none' ? 'block' : 'none';
        }
        
        function showEmergencyFix() {
            const div = document.getElementById('emergencyFix');
            div.style.display = div.style.display === 'none' ? 'block' : 'none';
        }
    </script>
</body>
</html>
