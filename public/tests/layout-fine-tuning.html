<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¨ Fechatter å¸ƒå±€å¾®è°ƒå·¥å…·</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background: #f8f9fa; }
        .card { background: white; border-radius: 12px; padding: 24px; margin: 20px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .btn { padding: 8px 16px; background: #0969da; color: white; border: none; border-radius: 6px; cursor: pointer; margin: 5px; }
        .status { padding: 8px 12px; border-radius: 6px; margin: 5px 0; font-weight: bold; }
        .success { background: #d1edff; color: #0969da; }
        .info { background: #f6f8fa; color: #24292e; }
    </style>
</head>
<body>
    <div class="card">
        <h1>ğŸ¨ Fechatter å¸ƒå±€å¾®è°ƒå·¥å…·</h1>
        <div class="status success">âœ… æ¶ˆæ¯æ˜¾ç¤ºç³»ç»Ÿæ­£å¸¸å·¥ä½œ</div>
        <div class="status info">ğŸ“Š åŸºäºDAGåˆ†æçš„ä¼˜åŒ–å»ºè®®</div>
        
        <h3>ğŸ”§ ä¸€é”®ä¼˜åŒ–æ“ä½œ</h3>
        <button class="btn" onclick="optimizeMessageSpacing()">ä¼˜åŒ–æ¶ˆæ¯é—´è·</button>
        <button class="btn" onclick="alignAvatars()">å¯¹é½å¤´åƒä½ç½®</button>
        <button class="btn" onclick="smoothTransitions()">ä¼˜åŒ–åŠ¨ç”»æ•ˆæœ</button>
        <button class="btn" onclick="verifyLayout()">éªŒè¯å¸ƒå±€è´¨é‡</button>
        
        <h3>ğŸ“‹ å¸ƒå±€æ£€æŸ¥ç»“æœ</h3>
        <div id="results"></div>
    </div>

    <script>
        function log(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = message;
            document.getElementById('results').appendChild(div);
        }

        function optimizeMessageSpacing() {
            const style = document.createElement('style');
            style.textContent = `
                /* ğŸ¯ ä¼˜åŒ–æ¶ˆæ¯é—´è· */
                .discord-message {
                    padding: 16px 16px 16px 72px !important;
                    margin-bottom: 2px !important;
                }
                .message-wrapper {
                    margin: 0 !important;
                }
            `;
            document.head.appendChild(style);
            log('âœ… æ¶ˆæ¯é—´è·å·²ä¼˜åŒ– (16px padding)', 'success');
        }

        function alignAvatars() {
            const style = document.createElement('style');
            style.textContent = `
                /* ï¿½ï¿½ å®Œç¾å¯¹é½å¤´åƒ */
                .message-avatar-slot {
                    position: absolute !important;
                    left: 16px !important;
                    top: 8px !important;
                    width: 40px !important;
                    height: 40px !important;
                }
                .message-content-slot {
                    margin-left: 0 !important;
                    padding-left: 0 !important;
                }
            `;
            document.head.appendChild(style);
            log('âœ… å¤´åƒå¯¹é½å·²ä¼˜åŒ–', 'success');
        }

        function smoothTransitions() {
            const style = document.createElement('style');
            style.textContent = `
                /* ğŸ¯ ä¼˜åŒ–åŠ¨ç”»æ•ˆæœ */
                .discord-message {
                    transition: background-color 0.15s ease !important;
                }
                .discord-message:hover {
                    transform: none !important;
                    background-color: rgba(124, 58, 237, 0.02) !important;
                }
                .message-toolbar {
                    transition: opacity 0.2s ease !important;
                }
            `;
            document.head.appendChild(style);
            log('âœ… åŠ¨ç”»æ•ˆæœå·²ä¼˜åŒ–', 'success');
        }

        function verifyLayout() {
            const messages = document.querySelectorAll('.discord-message');
            const dividers = document.querySelectorAll('.time-session-divider');
            
            log(`ğŸ“Š å¸ƒå±€éªŒè¯ç»“æœ:`, 'info');
            log(`æ¶ˆæ¯æ•°é‡: ${messages.length}`, 'info');
            log(`æ—¶é—´åˆ†éš”ç¬¦: ${dividers.length}`, 'info');
            
            let alignmentIssues = 0;
            messages.forEach((msg, index) => {
                const avatar = msg.querySelector('.message-avatar-slot');
                const content = msg.querySelector('.message-content-slot');
                
                if (avatar && content) {
                    const avatarRect = avatar.getBoundingClientRect();
                    const contentRect = content.getBoundingClientRect();
                    
                    if (Math.abs(avatarRect.left + 56 - contentRect.left) > 5) {
                        alignmentIssues++;
                    }
                }
            });
            
            if (alignmentIssues === 0) {
                log('âœ… æ‰€æœ‰æ¶ˆæ¯å¯¹é½å®Œç¾', 'success');
            } else {
                log(`âš ï¸ ${alignmentIssues} ä¸ªæ¶ˆæ¯éœ€è¦å¯¹é½è°ƒæ•´`, 'info');
            }
        }
    </script>
</body>
</html>
