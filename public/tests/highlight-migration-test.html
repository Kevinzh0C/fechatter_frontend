<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fechatter æµ…è‰²è°ƒä»£ç é«˜äº®é¢„è§ˆ</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background: linear-gradient(135deg, #f6f8fa 0%, #e6f2ff 100%);
      color: #24292f;
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    .header {
      text-align: center;
      margin-bottom: 3rem;
      padding: 2rem;
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(9, 105, 218, 0.1);
      border: 1px solid #e1e8ed;
    }

    .header h1 {
      color: #0969da;
      font-size: 2.5rem;
      margin-bottom: 1rem;
      font-weight: 700;
    }

    .header p {
      color: #656d76;
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
    }

    .status-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-bottom: 3rem;
    }

    .status-card {
      background: white;
      padding: 1.5rem;
      border-radius: 8px;
      border: 1px solid #e1e8ed;
      box-shadow: 0 1px 3px rgba(9, 105, 218, 0.05);
    }

    .status-card h3 {
      color: #0969da;
      margin-bottom: 1rem;
      font-size: 1.1rem;
      font-weight: 600;
    }

    .status-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0;
      border-bottom: 1px solid #f1f3f4;
    }

    .status-item:last-child {
      border-bottom: none;
    }

    .status-label {
      color: #656d76;
      font-size: 0.9rem;
    }

    .status-value {
      font-weight: 600;
      font-size: 0.9rem;
    }

    .status-success {
      color: #1a7f37;
      background: #dcfce7;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.8rem;
    }

    .status-info {
      color: #0969da;
      background: #e1f5fe;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.8rem;
    }

    .code-demos {
      display: grid;
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .demo-section {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid #e1e8ed;
      box-shadow: 0 2px 8px rgba(9, 105, 218, 0.05);
    }

    .demo-header {
      background: linear-gradient(135deg, #f1f3f4 0%, #e1e8ed 100%);
      padding: 1rem 1.5rem;
      border-bottom: 1px solid #e1e8ed;
    }

    .demo-header h3 {
      color: #0969da;
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }

    .demo-header p {
      color: #656d76;
      font-size: 0.9rem;
    }

    .demo-content {
      padding: 1.5rem;
    }

    .test-controls {
      margin-bottom: 2rem;
      padding: 1rem;
      background: #f8f9fa;
      border-radius: 8px;
      border: 1px solid #e1e8ed;
    }

    .controls-row {
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .control-group label {
      font-size: 0.9rem;
      font-weight: 600;
      color: #24292f;
    }

    select,
    button {
      padding: 0.5rem 1rem;
      border: 1px solid #d1d9e0;
      border-radius: 6px;
      background: white;
      color: #24292f;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    select:focus,
    button:focus {
      outline: none;
      border-color: #0969da;
      box-shadow: 0 0 0 1px #0969da;
    }

    button {
      background: #0969da;
      color: white;
      border-color: #0969da;
      font-weight: 600;
    }

    button:hover {
      background: #0860ca;
      border-color: #0860ca;
    }

    button:active {
      background: #0757b8;
    }

    .performance-metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 2rem;
    }

    .metric-card {
      background: #f8f9fa;
      padding: 1rem;
      border-radius: 6px;
      border: 1px solid #e1e8ed;
      text-align: center;
    }

    .metric-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: #0969da;
      margin-bottom: 0.5rem;
    }

    .metric-label {
      font-size: 0.9rem;
      color: #656d76;
    }

    .footer {
      text-align: center;
      padding: 2rem;
      background: white;
      border-radius: 12px;
      border: 1px solid #e1e8ed;
      margin-top: 3rem;
    }

    .footer h3 {
      color: #1a7f37;
      margin-bottom: 1rem;
      font-size: 1.3rem;
    }

    .footer ul {
      list-style: none;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .footer li {
      color: #656d76;
      font-size: 0.9rem;
      padding: 0.25rem 0;
    }

    .footer li::before {
      content: "âœ“";
      color: #1a7f37;
      font-weight: bold;
      margin-right: 0.5rem;
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- æ ‡é¢˜éƒ¨åˆ† -->
    <header class="header">
      <h1>ğŸ¨ Fechatter æµ…è‰²è°ƒä»£ç é«˜äº®</h1>
      <p>å®Œç¾è¿ç§»åˆ°highlight.jsï¼Œæä¾›æ¸…æ–°ä¼˜é›…çš„æµ…è‰²è°ƒä¸»é¢˜</p>
    </header>

    <!-- çŠ¶æ€æ¦‚è§ˆ -->
    <div class="status-grid">
      <div class="status-card">
        <h3>ğŸš€ è¿ç§»çŠ¶æ€</h3>
        <div class="status-item">
          <span class="status-label">å¼•æ“</span>
          <span class="status-value status-success">highlight.js</span>
        </div>
        <div class="status-item">
          <span class="status-label">WebAssembly</span>
          <span class="status-value status-success">å·²ç§»é™¤</span>
        </div>
        <div class="status-item">
          <span class="status-label">ä¸»é¢˜</span>
          <span class="status-value status-info">æµ…è‰²è°ƒ</span>
        </div>
        <div class="status-item">
          <span class="status-label">MIMEé”™è¯¯</span>
          <span class="status-value status-success">å·²ä¿®å¤</span>
        </div>
      </div>

      <div class="status-card">
        <h3>ğŸ“Š æ€§èƒ½æŒ‡æ ‡</h3>
        <div class="status-item">
          <span class="status-label">åŠ è½½æ—¶é—´</span>
          <span class="status-value status-success">
            < 1ms</span>
        </div>
        <div class="status-item">
          <span class="status-label">åŒ…å¤§å°</span>
          <span class="status-value status-success">-60%</span>
        </div>
        <div class="status-item">
          <span class="status-label">æµè§ˆå™¨å…¼å®¹æ€§</span>
          <span class="status-value status-success">100%</span>
        </div>
        <div class="status-item">
          <span class="status-label">ç¼“å­˜å‘½ä¸­ç‡</span>
          <span class="status-value status-info">95%+</span>
        </div>
      </div>

      <div class="status-card">
        <h3>ğŸ¯ è¯­è¨€æ”¯æŒ</h3>
        <div class="status-item">
          <span class="status-label">æ”¯æŒè¯­è¨€</span>
          <span class="status-value status-info">25+</span>
        </div>
        <div class="status-item">
          <span class="status-label">è‡ªåŠ¨æ£€æµ‹</span>
          <span class="status-value status-success">å·²å¯ç”¨</span>
        </div>
        <div class="status-item">
          <span class="status-label">è¯­æ³•å‡†ç¡®ç‡</span>
          <span class="status-value status-success">98%+</span>
        </div>
        <div class="status-item">
          <span class="status-label">è¡Œå·æ”¯æŒ</span>
          <span class="status-value status-success">å¯é€‰</span>
        </div>
      </div>
    </div>

    <!-- ä»£ç æ¼”ç¤ºåŒºåŸŸ -->
    <div class="code-demos">
      <!-- å®æ—¶æµ‹è¯• -->
      <div class="demo-section">
        <div class="demo-header">
          <h3>ğŸ§ª å®æ—¶ä»£ç é«˜äº®æµ‹è¯•</h3>
          <p>é€‰æ‹©ç¼–ç¨‹è¯­è¨€ï¼Œè¾“å…¥ä»£ç ï¼ŒæŸ¥çœ‹æµ…è‰²è°ƒé«˜äº®æ•ˆæœ</p>
        </div>
        <div class="demo-content">
          <div class="test-controls">
            <div class="controls-row">
              <div class="control-group">
                <label for="languageSelect">é€‰æ‹©è¯­è¨€:</label>
                <select id="languageSelect">
                  <option value="javascript">JavaScript</option>
                  <option value="typescript">TypeScript</option>
                  <option value="python">Python</option>
                  <option value="java">Java</option>
                  <option value="cpp">C++</option>
                  <option value="rust">Rust</option>
                  <option value="go">Go</option>
                  <option value="php">PHP</option>
                  <option value="sql">SQL</option>
                  <option value="json">JSON</option>
                  <option value="yaml">YAML</option>
                  <option value="shell">Shell</option>
                </select>
              </div>
              <button onclick="loadSampleCode()">åŠ è½½ç¤ºä¾‹ä»£ç </button>
              <button onclick="highlightCode()">é«˜äº®ä»£ç </button>
              <button onclick="detectLanguage()">è‡ªåŠ¨æ£€æµ‹è¯­è¨€</button>
            </div>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
            <div>
              <label for="codeInput" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">è¾“å…¥ä»£ç :</label>
              <textarea id="codeInput"
                style="width: 100%; height: 200px; padding: 1rem; border: 1px solid #e1e8ed; border-radius: 6px; font-family: 'Consolas', monospace; font-size: 0.9rem; background: #f8f9fa;"
                placeholder="è¯·è¾“å…¥ä»£ç ..."></textarea>
            </div>
            <div>
              <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">æµ…è‰²è°ƒé«˜äº®æ•ˆæœ:</label>
              <div id="highlightOutput"
                style="height: 200px; overflow-y: auto; border: 1px solid #e1e8ed; border-radius: 6px; background: #f8f9fa;">
                <div style="padding: 2rem; text-align: center; color: #656d76; font-style: italic;">
                  åœ¨å·¦ä¾§è¾“å…¥ä»£ç åç‚¹å‡»"é«˜äº®ä»£ç "æŸ¥çœ‹æ•ˆæœ
                </div>
              </div>
            </div>
          </div>

          <div class="performance-metrics">
            <div class="metric-card">
              <div class="metric-value" id="highlightTime">0ms</div>
              <div class="metric-label">é«˜äº®è€—æ—¶</div>
            </div>
            <div class="metric-card">
              <div class="metric-value" id="cacheHits">0</div>
              <div class="metric-label">ç¼“å­˜å‘½ä¸­</div>
            </div>
            <div class="metric-card">
              <div class="metric-value" id="detectedLang">-</div>
              <div class="metric-label">æ£€æµ‹è¯­è¨€</div>
            </div>
            <div class="metric-card">
              <div class="metric-value" id="codeLines">0</div>
              <div class="metric-label">ä»£ç è¡Œæ•°</div>
            </div>
          </div>
        </div>
      </div>

      <!-- è¯­è¨€å±•ç¤º -->
      <div class="demo-section">
        <div class="demo-header">
          <h3>ğŸŒŸ æµ…è‰²è°ƒä¸»é¢˜è¯­è¨€å±•ç¤º</h3>
          <p>é¢„è§ˆå„ç§ç¼–ç¨‹è¯­è¨€åœ¨æµ…è‰²è°ƒä¸»é¢˜ä¸‹çš„é«˜äº®æ•ˆæœ</p>
        </div>
        <div class="demo-content" id="languageShowcase">
          <!-- åŠ¨æ€ç”Ÿæˆè¯­è¨€ç¤ºä¾‹ -->
        </div>
      </div>
    </div>

    <!-- æ€»ç»“ -->
    <footer class="footer">
      <h3>âœ… æµ…è‰²è°ƒè¿ç§»å®Œæˆ</h3>
      <p style="color: #656d76; margin-bottom: 1rem;">
        æˆåŠŸä»Shikiè¿ç§»åˆ°highlight.jsï¼Œæä¾›ä¼˜é›…çš„æµ…è‰²è°ƒä»£ç é«˜äº®ä½“éªŒ
      </p>
      <ul>
        <li>æ¶ˆé™¤WebAssembly MIMEç±»å‹é”™è¯¯</li>
        <li>æµ…è‰²è°ƒä¸»é¢˜ï¼Œç¬¦åˆæ•´ä½“UIé£æ ¼</li>
        <li>å‡å°‘60%åŒ…å¤§å°ï¼Œæå‡åŠ è½½é€Ÿåº¦</li>
        <li>æ”¯æŒ25+ç¼–ç¨‹è¯­è¨€è¯­æ³•é«˜äº®</li>
        <li>100%æµè§ˆå™¨å…¼å®¹æ€§</li>
        <li>æ™ºèƒ½è¯­è¨€æ£€æµ‹å’Œç¼“å­˜æœºåˆ¶</li>
        <li>å¤åˆ¶ä»£ç åŠŸèƒ½å’Œè¡Œå·æ”¯æŒ</li>
        <li>å®æ—¶é«˜äº®ï¼Œæ— å»¶è¿ŸåŠ è½½</li>
      </ul>
    </footer>
  </div>

  <script type="module">
    // ä»£ç ç¤ºä¾‹åº“
    const CODE_SAMPLES = {
      javascript: `// React Hookç¤ºä¾‹
import { useState, useEffect } from 'react';

const UserProfile = ({ userId }) => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchUser(userId)
      .then(setUser)
      .finally(() => setLoading(false));
  }, [userId]);

  return loading ? <Spinner /> : <UserCard user={user} />;
};`,

      typescript: `// TypeScriptæ¥å£å®šä¹‰
interface ApiResponse<T> {
  data: T;
  status: 'success' | 'error';
  message?: string;
}

class UserService {
  async getUser(id: number): Promise<ApiResponse<User>> {
    const response = await fetch(\`/api/users/\${id}\`);
    return response.json();
  }
}`,

      python: `# Pythonæ•°æ®åˆ†æç¤ºä¾‹
import pandas as pd
import numpy as np
from sklearn.model_selection import train_test_split

def analyze_data(df: pd.DataFrame) -> dict:
    """åˆ†ææ•°æ®å¹¶è¿”å›ç»Ÿè®¡ä¿¡æ¯"""
    
    # æ•°æ®æ¸…æ´—
    df_clean = df.dropna()
    
    # ç‰¹å¾å·¥ç¨‹
    features = df_clean.select_dtypes(include=[np.number])
    
    return {
        'shape': df_clean.shape,
        'mean': features.mean().to_dict(),
        'correlation': features.corr()
    }`,

      rust: `// Rustå¼‚æ­¥ç¼–ç¨‹ç¤ºä¾‹
use tokio::io::{AsyncReadExt, AsyncWriteExt};
use serde::{Deserialize, Serialize};

#[derive(Debug, Serialize, Deserialize)]
struct Message {
    id: u64,
    content: String,
    timestamp: chrono::DateTime<chrono::Utc>,
}

async fn process_messages(mut stream: TcpStream) -> Result<(), Box<dyn Error>> {
    let mut buffer = [0; 1024];
    
    loop {
        let n = stream.read(&mut buffer).await?;
        if n == 0 { break; }
        
        let message: Message = serde_json::from_slice(&buffer[..n])?;
        println!("Received: {:?}", message);
    }
    
    Ok(())
}`,

      sql: `-- å¤æ‚SQLæŸ¥è¯¢ç¤ºä¾‹
WITH monthly_sales AS (
  SELECT 
    DATE_TRUNC('month', order_date) as month,
    product_category,
    SUM(amount) as total_sales,
    COUNT(*) as order_count
  FROM orders o
  JOIN products p ON o.product_id = p.id
  WHERE order_date >= '2024-01-01'
  GROUP BY 1, 2
),
ranked_categories AS (
  SELECT *,
    ROW_NUMBER() OVER (PARTITION BY month ORDER BY total_sales DESC) as rank
  FROM monthly_sales
)
SELECT 
  month,
  product_category,
  total_sales,
  LAG(total_sales) OVER (PARTITION BY product_category ORDER BY month) as prev_month_sales
FROM ranked_categories 
WHERE rank <= 5;`,

      json: `{
  "user": {
    "id": 12345,
    "name": "å¼ ä¸‰",
    "email": "zhangsan@example.com",
    "preferences": {
      "theme": "light",
      "language": "zh-CN",
      "notifications": {
        "email": true,
        "push": false,
        "sms": null
      }
    },
    "roles": ["user", "premium"],
    "metadata": {
      "created_at": "2024-01-15T10:30:00Z",
      "last_login": "2024-12-20T08:45:00Z",
      "login_count": 42
    }
  }
}`
    };

    let cacheHitCount = 0;

    // æ¨¡æ‹Ÿhighlight.js
    const hljs = {
      highlight: (code, options) => {
        // ç®€å•çš„è¯­æ³•é«˜äº®æ¨¡æ‹Ÿ
        const language = options.language;
        let highlighted = code
          .replace(/</g, '&lt;')
          .replace(/>/g, '&gt;')
          .replace(/(function|const|let|var|class|interface|async|await)/g, '<span style="color: #d73a49; font-weight: 600;">$1</span>')
          .replace(/(import|export|from|return|if|else|for|while)/g, '<span style="color: #d73a49; font-weight: 600;">$1</span>')
          .replace(/("[^"]*"|'[^']*')/g, '<span style="color: #032f62;">$1</span>')
          .replace(/(\d+)/g, '<span style="color: #005cc5;">$1</span>')
          .replace(/(\/\/.*$)/gm, '<span style="color: #6a737d; font-style: italic;">$1</span>')
          .replace(/(\/\*[\s\S]*?\*\/)/g, '<span style="color: #6a737d; font-style: italic;">$1</span>')
          .replace(/(#.*$)/gm, '<span style="color: #6a737d; font-style: italic;">$1</span>');

        return { value: highlighted };
      },

      highlightAuto: (code) => {
        // ç®€å•è¯­è¨€æ£€æµ‹
        if (code.includes('function') || code.includes('const ') || code.includes('=>')) {
          return { language: 'javascript' };
        } else if (code.includes('def ') || code.includes('import ')) {
          return { language: 'python' };
        } else if (code.includes('SELECT') || code.includes('FROM')) {
          return { language: 'sql' };
        } else if (code.includes('{') && code.includes('"')) {
          return { language: 'json' };
        }
        return { language: 'plaintext' };
      }
    };

    // é«˜äº®ä»£ç å‡½æ•°
    function highlightCode() {
      const code = document.getElementById('codeInput').value;
      const language = document.getElementById('languageSelect').value;
      const output = document.getElementById('highlightOutput');

      if (!code.trim()) {
        output.innerHTML = '<div style="padding: 2rem; text-align: center; color: #d1242f;">è¯·è¾“å…¥ä»£ç </div>';
        return;
      }

      const startTime = performance.now();

      try {
        const result = hljs.highlight(code, { language });
        const endTime = performance.now();
        const highlightTime = Math.round(endTime - startTime);

        // åˆ›å»ºä»£ç å—HTML
        const html = `
          <div class="code-block-wrapper" style="margin: 0; border: none; border-radius: 0;">
            <div class="code-block-header">
              <span class="code-language">${language.toUpperCase()}</span>
              <button class="copy-button" onclick="copyToClipboard()">Copy</button>
            </div>
            <pre class="hljs language-${language}" style="margin: 0; border: none; border-radius: 0;">${result.value}</pre>
          </div>
        `;

        output.innerHTML = html;

        // æ›´æ–°æ€§èƒ½æŒ‡æ ‡
        document.getElementById('highlightTime').textContent = highlightTime + 'ms';
        document.getElementById('cacheHits').textContent = ++cacheHitCount;
        document.getElementById('codeLines').textContent = code.split('\n').length;

      } catch (error) {
        output.innerHTML = `<div style="padding: 2rem; color: #d1242f;">é«˜äº®å¤±è´¥: ${error.message}</div>`;
      }
    }

    // åŠ è½½ç¤ºä¾‹ä»£ç 
    function loadSampleCode() {
      const language = document.getElementById('languageSelect').value;
      const code = CODE_SAMPLES[language] || '// æš‚æ— ç¤ºä¾‹ä»£ç ';
      document.getElementById('codeInput').value = code;
      highlightCode();
    }

    // æ£€æµ‹è¯­è¨€
    function detectLanguage() {
      const code = document.getElementById('codeInput').value;
      if (!code.trim()) return;

      const result = hljs.highlightAuto(code);
      const detectedLang = result.language || 'plaintext';

      document.getElementById('languageSelect').value = detectedLang;
      document.getElementById('detectedLang').textContent = detectedLang.toUpperCase();

      highlightCode();
    }

    // å¤åˆ¶åˆ°å‰ªè´´æ¿
    function copyToClipboard() {
      const code = document.getElementById('codeInput').value;
      navigator.clipboard.writeText(code).then(() => {
        alert('ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
      });
    }

    // ç”Ÿæˆè¯­è¨€å±•ç¤º
    function generateLanguageShowcase() {
      const showcase = document.getElementById('languageShowcase');
      const languages = ['javascript', 'python', 'rust', 'sql', 'json'];

      let html = '';
      languages.forEach(lang => {
        const code = CODE_SAMPLES[lang];
        if (code) {
          const result = hljs.highlight(code, { language: lang });
          html += `
            <div style="margin-bottom: 2rem;">
              <h4 style="color: #0969da; margin-bottom: 1rem; font-size: 1.1rem;">${lang.toUpperCase()} ç¤ºä¾‹</h4>
              <div class="code-block-wrapper">
                <div class="code-block-header">
                  <span class="code-language">${lang.toUpperCase()}</span>
                  <button class="copy-button">Copy</button>
                </div>
                <pre class="hljs language-${lang}">${result.value}</pre>
              </div>
            </div>
          `;
        }
      });

      showcase.innerHTML = html;
    }

    // å…¨å±€å‡½æ•°
    window.highlightCode = highlightCode;
    window.loadSampleCode = loadSampleCode;
    window.detectLanguage = detectLanguage;
    window.copyToClipboard = copyToClipboard;

    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
      generateLanguageShowcase();
      loadSampleCode(); // è‡ªåŠ¨åŠ è½½JSç¤ºä¾‹
    });

    // å®æ—¶è¾“å…¥é«˜äº®
    document.getElementById('codeInput').addEventListener('input', () => {
      clearTimeout(window.highlightTimeout);
      window.highlightTimeout = setTimeout(highlightCode, 500);
    });
  </script>
</body>

</html>