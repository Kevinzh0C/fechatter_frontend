<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“Š Fechatter å‘é€æ¶ˆæ¯æµç¨‹ DAG åˆ†æ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .analysis-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #5865f2 0%, #7c3aed 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 22px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dag-container {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 30px;
            overflow-x: auto;
            margin-bottom: 30px;
        }

        .dag-flow {
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-width: 1200px;
        }

        .flow-layer {
            display: flex;
            align-items: center;
            gap: 20px;
            justify-content: center;
        }

        .flow-node {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            padding: 15px 20px;
            min-width: 200px;
            text-align: center;
            position: relative;
            transition: all 0.3s ease;
        }

        .flow-node:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .flow-node.start {
            border-color: #28a745;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        }

        .flow-node.process {
            border-color: #17a2b8;
            background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
        }

        .flow-node.api {
            border-color: #ffc107;
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        }

        .flow-node.backend {
            border-color: #dc3545;
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
        }

        .flow-node.end {
            border-color: #6f42c1;
            background: linear-gradient(135deg, #e2d9f3 0%, #d1b3ff 100%);
        }

        .flow-node h4 {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .flow-node p {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }

        .flow-node .tech {
            font-size: 12px;
            color: #999;
            font-style: italic;
        }

        .flow-arrow {
            color: #5865f2;
            font-size: 24px;
            font-weight: bold;
            margin: 0 10px;
        }

        .code-section {
            background: #2d3748;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .code-section h4 {
            color: #ffffff;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .code-section pre {
            color: #e2e8f0;
            font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            overflow-x: auto;
        }

        .step-details {
            display: grid;
            gap: 20px;
            margin-top: 30px;
        }

        .step-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid #5865f2;
        }

        .step-card h3 {
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .step-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .step-info div {
            background: white;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #e1e5e9;
        }

        .step-info strong {
            color: #5865f2;
            display: block;
            margin-bottom: 5px;
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .metric-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid #dee2e6;
        }

        .metric-card h4 {
            color: #495057;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .metric-value {
            font-size: 24px;
            font-weight: 700;
            color: #5865f2;
            margin-bottom: 5px;
        }

        .metric-desc {
            font-size: 14px;
            color: #6c757d;
        }

        .parallel-flows {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        .flow-branch {
            background: #f1f3f4;
            border-radius: 12px;
            padding: 20px;
            border: 2px dashed #5865f2;
        }

        .flow-branch h3 {
            color: #5865f2;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .flow-branch ul {
            list-style: none;
            padding: 0;
        }

        .flow-branch li {
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
            color: #495057;
        }

        .flow-branch li:last-child {
            border-bottom: none;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid;
        }

        .error-flow {
            background: #ffe6e6;
            border: 2px solid #dc3545;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .error-flow h3 {
            color: #dc3545;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .optimization-tips {
            background: #e8f4fd;
            border: 2px solid #17a2b8;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .optimization-tips h3 {
            color: #17a2b8;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .optimization-tips ul {
            list-style-type: none;
            padding: 0;
        }

        .optimization-tips li {
            padding: 5px 0;
            color: #495057;
        }

        .optimization-tips li::before {
            content: "ğŸ’¡ ";
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="analysis-container">
        <div class="header">
            <h1>ğŸ“Š Fechatter å‘é€æ¶ˆæ¯æµç¨‹ DAG åˆ†æ</h1>
            <p>å®Œæ•´çš„å‰ç«¯æ¶ˆæ¯å‘é€æœ‰å‘æ— ç¯å›¾æµç¨‹è§£æ</p>
        </div>

        <div class="content">
            <!-- ä¸»æµç¨‹DAG -->
            <div class="section">
                <h2>ï¿½ï¿½ ä¸»æµç¨‹ DAG å›¾</h2>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color start" style="border-color: #28a745; background: #d4edda;"></div>
                        <span>ç”¨æˆ·æ“ä½œ</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color process" style="border-color: #17a2b8; background: #d1ecf1;"></div>
                        <span>å‰ç«¯å¤„ç†</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color api" style="border-color: #ffc107; background: #fff3cd;"></div>
                        <span>APIè°ƒç”¨</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color backend" style="border-color: #dc3545; background: #f8d7da;"></div>
                        <span>åç«¯å¤„ç†</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color end" style="border-color: #6f42c1; background: #e2d9f3;"></div>
                        <span>å®ŒæˆçŠ¶æ€</span>
                    </div>
                </div>

                <div class="dag-container">
                    <div class="dag-flow">
                        <!-- Layer 1: User Action -->
                        <div class="flow-layer">
                            <div class="flow-node start">
                                <h4>ğŸ–±ï¸ ç”¨æˆ·æ“ä½œ</h4>
                                <p>ç‚¹å‡»å‘é€æŒ‰é’®æˆ–æŒ‰Enteré”®</p>
                                <div class="tech">ç”¨æˆ·äº¤äº’è§¦å‘</div>
                            </div>
                        </div>

                        <div class="flow-layer">
                            <div class="flow-arrow">â†“</div>
                        </div>

                        <!-- Layer 2: Input Validation -->
                        <div class="flow-layer">
                            <div class="flow-node process">
                                <h4>âœ… canSend æ£€æŸ¥</h4>
                                <p>éªŒè¯æœ‰æ–‡æœ¬å†…å®¹æˆ–æ–‡ä»¶</p>
                                <div class="tech">MessageInput.vue computed</div>
                            </div>
                        </div>

                        <div class="flow-layer">
                            <div class="flow-arrow">â†“</div>
                        </div>

                        <!-- Layer 3: Message Processing -->
                        <div class="flow-layer">
                            <div class="flow-node process">
                                <h4>ğŸ“ sendMessage()</h4>
                                <p>æ„å»ºæ¶ˆæ¯æ•°æ®å’ŒçŠ¶æ€ç®¡ç†</p>
                                <div class="tech">MessageInput.vue:932</div>
                            </div>
                        </div>

                        <div class="flow-layer">
                            <div class="flow-arrow">â†“</div>
                        </div>

                        <!-- Layer 4: File Upload (Conditional) -->
                        <div class="flow-layer">
                            <div class="flow-node api">
                                <h4>ğŸ“¤ æ–‡ä»¶ä¸Šä¼ </h4>
                                <p>ä¸Šä¼ Fileå¯¹è±¡è·å–URL</p>
                                <div class="tech">ChatService.uploadFile()</div>
                            </div>
                            <div class="flow-node process">
                                <h4>ğŸ”„ å¹¶è¡Œå¤„ç†</h4>
                                <p>å¤šæ–‡ä»¶å¹¶å‘ä¸Šä¼ </p>
                                <div class="tech">Promise.all()</div>
                            </div>
                        </div>

                        <div class="flow-layer">
                            <div class="flow-arrow">â†“</div>
                        </div>

                        <!-- Layer 5: Message Send -->
                        <div class="flow-layer">
                            <div class="flow-node api">
                                <h4>ğŸš€ ChatService.sendMessage()</h4>
                                <p>å‘é€æ¶ˆæ¯åˆ°åç«¯API</p>
                                <div class="tech">POST /chat/{id}/messages</div>
                            </div>
                        </div>

                        <div class="flow-layer">
                            <div class="flow-arrow">â†“</div>
                        </div>

                        <!-- Layer 6: Backend Processing -->
                        <div class="flow-layer">
                            <div class="flow-node backend">
                                <h4>ğŸ’¾ åç«¯å¤„ç†</h4>
                                <p>éªŒè¯ã€ä¿å­˜åˆ°æ•°æ®åº“</p>
                                <div class="tech">Rust Backend Service</div>
                            </div>
                            <div class="flow-node backend">
                                <h4>ğŸ“¡ NATSäº‹ä»¶</h4>
                                <p>å‘å¸ƒæ¶ˆæ¯äº‹ä»¶åˆ°JetStream</p>
                                <div class="tech">Event Publishing</div>
                            </div>
                        </div>

                        <div class="flow-layer">
                            <div class="flow-arrow">â†“</div>
                        </div>

                        <!-- Layer 7: SSE Broadcasting -->
                        <div class="flow-layer">
                            <div class="flow-node backend">
                                <h4>ğŸ“» SSEå¹¿æ’­</h4>
                                <p>å®æ—¶æ¨é€ç»™æ‰€æœ‰ç”¨æˆ·</p>
                                <div class="tech">Server-Sent Events</div>
                            </div>
                        </div>

                        <div class="flow-layer">
                            <div class="flow-arrow">â†“</div>
                        </div>

                        <!-- Layer 8: UI Update -->
                        <div class="flow-layer">
                            <div class="flow-node end">
                                <h4>ğŸ¯ UIæ›´æ–°</h4>
                                <p>æ¶ˆæ¯æ˜¾ç¤ºåœ¨èŠå¤©ç•Œé¢</p>
                                <div class="tech">DiscordMessageItem.vue</div>
                            </div>
                            <div class="flow-node end">
                                <h4>ğŸ–¼ï¸ å›¾ç‰‡æ˜¾ç¤º</h4>
                                <p>å›¾ç‰‡ç¼©ç•¥å›¾æ¸²æŸ“</p>
                                <div class="tech">FilePreview.vue</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è¯¦ç»†æ­¥éª¤åˆ†æ -->
            <div class="section">
                <h2>ğŸ” è¯¦ç»†æ­¥éª¤åˆ†æ</h2>
                
                <div class="step-details">
                    <div class="step-card">
                        <h3>1ï¸âƒ£ è§¦å‘æœºåˆ¶</h3>
                        <div class="step-info">
                            <div>
                                <strong>è§¦å‘äº‹ä»¶</strong>
                                handleKeyDown (Enteré”®) | @click="sendMessage"
                            </div>
                            <div>
                                <strong>å‰ç½®æ¡ä»¶</strong>
                                canSend.value === true
                            </div>
                        </div>
                        <div class="code-section">
                            <h4>MessageInput.vue - è§¦å‘ä»£ç </h4>
                            <pre>const handleKeyDown = (event) => {
  if (event.key === 'Enter' && !event.shiftKey) {
    event.preventDefault();
    sendMessage();
  }
};

const canSend = computed(() => {
  const hasContent = messageContent.value.trim().length > 0;
  const hasFiles = files.value.length > 0;
  const notSending = !isSending.value;
  return (hasContent || hasFiles) && notSending;
});</pre>
                        </div>
                    </div>

                    <div class="step-card">
                        <h3>2ï¸âƒ£ æ¶ˆæ¯æ•°æ®æ„å»º</h3>
                        <div class="step-info">
                            <div>
                                <strong>æ•°æ®æ¥æº</strong>
                                messageContent.value + files.value + props
                            </div>
                            <div>
                                <strong>æ•°æ®æ ¼å¼</strong>
                                SendMessageRequest æ¥å£
                            </div>
                        </div>
                        <div class="code-section">
                            <h4>MessageInput.vue:932 - æ•°æ®æ„å»º</h4>
                            <pre>const messageData = {
  content: messageContent.value.trim(),
  files: files.value, // Fileå¯¹è±¡æ•°ç»„
  formatMode: formatMode.value,
  reply_to: props.replyToMessage?.id,
  mentions: [], 
  priority: 'normal',
  is_important: false,
  is_scheduled: false
};</pre>
                        </div>
                    </div>

                    <div class="step-card">
                        <h3>3ï¸âƒ£ æ–‡ä»¶ä¸Šä¼ å¤„ç†</h3>
                        <div class="step-info">
                            <div>
                                <strong>ä¸Šä¼ æ–¹å¼</strong>
                                multipart/form-data
                            </div>
                            <div>
                                <strong>å¹¶å‘ç­–ç•¥</strong>
                                Promise.all() å¹¶è¡Œä¸Šä¼ 
                            </div>
                        </div>
                        <div class="code-section">
                            <h4>ChatService.ts:252 - æ–‡ä»¶ä¸Šä¼ </h4>
                            <pre>// 1. Handle file uploads
let uploadedFiles: UploadedFile[] = [];
const filesToUpload = messageData.files?.filter(f => f instanceof File) as File[] || [];

if (filesToUpload.length > 0) {
  const uploadPromises = filesToUpload.map(file => this.uploadFile(file as File));
  uploadedFiles = await Promise.all(uploadPromises);
}

// 2. æ•´ç†æ–‡ä»¶URL
const newFileUrls = uploadedFiles.map(f => f.url || f.file_url);
const allFileUrls = [...existingFileUrls, ...newFileUrls];</pre>
                        </div>
                    </div>

                    <div class="step-card">
                        <h3>4ï¸âƒ£ APIæ¶ˆæ¯å‘é€</h3>
                        <div class="step-info">
                            <div>
                                <strong>è¯·æ±‚æ–¹å¼</strong>
                                POST /chat/{chatId}/messages
                            </div>
                            <div>
                                <strong>å¹‚ç­‰æ€§</strong>
                                idempotency_key é˜²é‡å¤
                            </div>
                        </div>
                        <div class="code-section">
                            <h4>ChatService.ts:284 - APIè°ƒç”¨</h4>
                            <pre>const requestPayload = {
  content: finalContent,
  files: allFileUrls.length > 0 ? allFileUrls : undefined,
  reply_to: messageData.reply_to || undefined,
  mentions: messageData.mentions || undefined,
  idempotency_key: messageData.idempotency_key || this.generateIdempotencyKey()
};

const response = await api.post(`/chat/${chatId}/messages`, requestPayload);</pre>
                        </div>
                    </div>

                    <div class="step-card">
                        <h3>5ï¸âƒ£ äº‹ä»¶ä¼ æ’­</h3>
                        <div class="step-info">
                            <div>
                                <strong>ç»„ä»¶é€šä¿¡</strong>
                                emit('message-sent', sentMessage)
                            </div>
                            <div>
                                <strong>çŠ¶æ€æ›´æ–°</strong>
                                Chat.vue â†’ handleMessageSent
                            </div>
                        </div>
                        <div class="code-section">
                            <h4>MessageInput.vue:968 - äº‹ä»¶å‘å°„</h4>
                            <pre>const sentMessage = await ChatService.sendMessage(props.chatId, messageData);

// ğŸ¯ è§¦å‘çˆ¶ç»„ä»¶äº‹ä»¶ï¼Œä¼ é€’å·²å‘é€çš„æ¶ˆæ¯
emit('message-sent', sentMessage);

// Reset state
messageContent.value = '';
files.value = [];
closePreview();</pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å¹¶è¡Œæµç¨‹åˆ†æ -->
            <div class="section">
                <h2>âš¡ å¹¶è¡Œæµç¨‹åˆ†æ</h2>
                
                <div class="parallel-flows">
                    <div class="flow-branch">
                        <h3>ğŸ”„ åŒæ­¥æµç¨‹</h3>
                        <ul>
                            <li>âœ… ç”¨æˆ·è¾“å…¥éªŒè¯</li>
                            <li>ğŸ“¤ æ–‡ä»¶ä¸Šä¼ å¤„ç†</li>
                            <li>ğŸš€ æ¶ˆæ¯APIå‘é€</li>
                            <li>ğŸ“¨ çˆ¶ç»„ä»¶äº‹ä»¶é€šçŸ¥</li>
                            <li>ğŸ§¹ UIçŠ¶æ€é‡ç½®</li>
                        </ul>
                    </div>
                    
                    <div class="flow-branch">
                        <h3>ğŸ“¡ å¼‚æ­¥æµç¨‹</h3>
                        <ul>
                            <li>ğŸ’¾ åç«¯æ•°æ®åº“ä¿å­˜</li>
                            <li>ğŸ“Š NATSäº‹ä»¶å‘å¸ƒ</li>
                            <li>ğŸ” æœç´¢ç´¢å¼•æ›´æ–°</li>
                            <li>ğŸ“» SSEå®æ—¶å¹¿æ’­</li>
                            <li>ğŸ–¥ï¸ å…¶ä»–ç”¨æˆ·UIæ›´æ–°</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- æ€§èƒ½æŒ‡æ ‡ -->
            <div class="section">
                <h2>ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡</h2>
                
                <div class="metrics">
                    <div class="metric-card">
                        <h4>ğŸš€ å‘é€å»¶è¿Ÿ</h4>
                        <div class="metric-value">< 500ms</div>
                        <div class="metric-desc">æ–‡ä»¶ä¸Šä¼  + APIè°ƒç”¨</div>
                    </div>
                    
                    <div class="metric-card">
                        <h4>ğŸ“¡ SSEå»¶è¿Ÿ</h4>
                        <div class="metric-value">< 100ms</div>
                        <div class="metric-desc">å®æ—¶å¹¿æ’­åˆ°å…¶ä»–ç”¨æˆ·</div>
                    </div>
                    
                    <div class="metric-card">
                        <h4>ğŸ“ æ–‡ä»¶ä¸Šä¼ </h4>
                        <div class="metric-value">2MB</div>
                        <div class="metric-desc">å•æ–‡ä»¶æœ€å¤§å¤§å°</div>
                    </div>
                    
                    <div class="metric-card">
                        <h4>ğŸ”„ é‡è¯•æœºåˆ¶</h4>
                        <div class="metric-value">3æ¬¡</div>
                        <div class="metric-desc">ç½‘ç»œå¤±è´¥è‡ªåŠ¨é‡è¯•</div>
                    </div>
                </div>
            </div>

            <!-- é”™è¯¯å¤„ç†æµç¨‹ -->
            <div class="error-flow">
                <h3>âš ï¸ é”™è¯¯å¤„ç†æµç¨‹</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                    <div>
                        <strong>ç½‘ç»œé”™è¯¯å¤„ç†ï¼š</strong>
                        <ul style="margin-top: 10px; padding-left: 20px;">
                            <li>è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼ˆ3æ¬¡ï¼‰</li>
                            <li>æŒ‡æ•°é€€é¿ç­–ç•¥</li>
                            <li>ç”¨æˆ·å‹å¥½é”™è¯¯æç¤º</li>
                            <li>ç½‘ç»œå¥åº·æ£€æŸ¥</li>
                        </ul>
                    </div>
                    <div>
                        <strong>ä¸šåŠ¡é”™è¯¯å¤„ç†ï¼š</strong>
                        <ul style="margin-top: 10px; padding-left: 20px;">
                            <li>401: å¼•å¯¼é‡æ–°ç™»å½•</li>
                            <li>403: æƒé™ä¸è¶³æç¤º</li>
                            <li>413: æ–‡ä»¶è¿‡å¤§æç¤º</li>
                            <li>422: æ ¼å¼é”™è¯¯æç¤º</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- ä¼˜åŒ–å»ºè®® -->
            <div class="optimization-tips">
                <h3>ğŸ’¡ ä¼˜åŒ–å»ºè®®</h3>
                <ul>
                    <li>å®ç°ä¹è§‚æ›´æ–°ï¼šæ¶ˆæ¯å‘é€å‰å…ˆæ˜¾ç¤ºåœ¨UIä¸­</li>
                    <li>æ·»åŠ æ¶ˆæ¯çŠ¶æ€æŒ‡ç¤ºï¼šå‘é€ä¸­ã€å·²å‘é€ã€å·²é€è¾¾</li>
                    <li>æ–‡ä»¶å‹ç¼©ï¼šå›¾ç‰‡è‡ªåŠ¨å‹ç¼©å‡å°‘ä¸Šä¼ æ—¶é—´</li>
                    <li>æ‰¹é‡ä¸Šä¼ ï¼šå¤šæ–‡ä»¶æ—¶ä½¿ç”¨æ‰¹é‡ä¸Šä¼ API</li>
                    <li>ç¦»çº¿æ”¯æŒï¼šç½‘ç»œæ–­å¼€æ—¶ç¼“å­˜æ¶ˆæ¯</li>
                    <li>é¢„åŠ è½½ä¼˜åŒ–ï¼šé¢„å…ˆåŠ è½½è¡¨æƒ…å’Œè´´çº¸</li>
                </ul>
            </div>

            <!-- æŠ€æœ¯æ¶æ„æ€»ç»“ -->
            <div class="section">
                <h2>ğŸ—ï¸ æŠ€æœ¯æ¶æ„æ€»ç»“</h2>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin-top: 20px;">
                    <h3 style="color: #495057; margin-bottom: 15px;">æ ¸å¿ƒç»„ä»¶åä½œ</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                        <div style="background: white; padding: 15px; border-radius: 8px; border: 1px solid #dee2e6;">
                            <strong style="color: #5865f2;">å‰ç«¯å±‚</strong>
                            <div style="font-size: 14px; color: #6c757d; margin-top: 5px;">
                                MessageInput.vue â†’ ChatService.ts â†’ APIè°ƒç”¨
                            </div>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px; border: 1px solid #dee2e6;">
                            <strong style="color: #5865f2;">ä¼ è¾“å±‚</strong>
                            <div style="font-size: 14px; color: #6c757d; margin-top: 5px;">
                                HTTP/REST â†’ multipart/form-data â†’ JSON
                            </div>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px; border: 1px solid #dee2e6;">
                            <strong style="color: #5865f2;">åç«¯å±‚</strong>
                            <div style="font-size: 14px; color: #6c757d; margin-top: 5px;">
                                RustæœåŠ¡ â†’ PostgreSQL â†’ NATS â†’ SSE
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ·»åŠ äº¤äº’å¼åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            // ç‚¹å‡»èŠ‚ç‚¹æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
            const flowNodes = document.querySelectorAll('.flow-node');
            flowNodes.forEach(node => {
                node.addEventListener('click', function() {
                    // é«˜äº®é€‰ä¸­çš„èŠ‚ç‚¹
                    flowNodes.forEach(n => n.style.boxShadow = '');
                    this.style.boxShadow = '0 0 20px rgba(88, 101, 242, 0.4)';
                    
                    // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ›´å¤šäº¤äº’é€»è¾‘
                    console.log('Clicked node:', this.querySelector('h4').textContent);
                });
            });

            // æ·»åŠ å¤åˆ¶ä»£ç åŠŸèƒ½
            const codeBlocks = document.querySelectorAll('.code-section pre');
            codeBlocks.forEach(block => {
                block.style.cursor = 'pointer';
                block.title = 'ç‚¹å‡»å¤åˆ¶ä»£ç ';
                block.addEventListener('click', function() {
                    navigator.clipboard.writeText(this.textContent);
                    
                    // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
                    const originalBg = this.style.backgroundColor;
                    this.style.backgroundColor = 'rgba(40, 167, 69, 0.2)';
                    setTimeout(() => {
                        this.style.backgroundColor = originalBg;
                    }, 500);
                });
            });
        });
    </script>
</body>
</html>
