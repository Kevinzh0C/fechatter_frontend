/* ğŸ·ï¸ Channel List CJK Font Fix - é¢‘é“åˆ—è¡¨CJKå­—ä½“ä¿®å¤
 * ç¡®ä¿é¢‘é“åˆ—è¡¨ä¸­çš„ä¸­æ–‡ã€æ—¥è¯­ã€éŸ©è¯­å†…å®¹æ­£ç¡®æ˜¾ç¤º
 * è§£å†³é¢‘é“åç§°ã€ç”¨æˆ·æ¶ˆæ¯é¢„è§ˆç­‰å­—ä½“é—®é¢˜
 */

:root {
  /* ğŸ¯ é¢‘é“åˆ—è¡¨ä¸“ç”¨å­—ä½“å˜é‡ */
  --channel-list-cjk-font: var(--font-family-unified-cjk, 
    -apple-system, BlinkMacSystemFont, 'Segoe UI',
    'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
    'Hiragino Kaku Gothic ProN', 'Yu Gothic Medium',
    'Apple SD Gothic Neo', 'Malgun Gothic',
    'Noto Sans CJK SC', 'Noto Sans CJK JP', 'Noto Sans CJK KR',
    'Helvetica Neue', Arial, sans-serif);
  
  /* ğŸ“ é¢‘é“åˆ—è¡¨ä¸“ç”¨æ’ç‰ˆå‚æ•° */
  --channel-list-letter-spacing: 0.01em;
  --channel-list-line-height: 1.4;
  --channel-list-font-weight: 500;
  
  /* ğŸ¯ NEW: é¢‘é“åˆ—è¡¨ä¸“ç”¨å­—ä½“å¤§å° */
  --channel-name-font-size: 14px;
  --channel-message-preview-font-size: 12px;
  --channel-section-title-font-size: 12px;
}

/* ğŸ¯ é¢‘é“åˆ—è¡¨æ•´ä½“å­—ä½“ */
.channel-list {
  font-family: var(--channel-list-cjk-font) !important;
  letter-spacing: var(--channel-list-letter-spacing) !important;
  line-height: var(--channel-list-line-height) !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  text-rendering: optimizeLegibility !important;
}

/* ğŸ·ï¸ é¢‘é“åç§°å­—ä½“ä¼˜åŒ– */
.channel-item .name-text,
.channel-name .name-text,
.channel-title {
  font-family: var(--channel-list-cjk-font) !important;
  font-size: var(--channel-name-font-size) !important;
  letter-spacing: var(--channel-list-letter-spacing) !important;
  line-height: var(--channel-list-line-height) !important;
  font-weight: var(--channel-list-font-weight) !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  text-rendering: optimizeLegibility !important;
}

/* ğŸ“ æœ€åæ¶ˆæ¯é¢„è§ˆå­—ä½“ä¼˜åŒ– - FIXED: æ˜ç¡®å­—ä½“å¤§å° */
.last-message,
.last-message .message-sender,
.last-message .message-content {
  font-family: var(--channel-list-cjk-font) !important;
  font-size: var(--channel-message-preview-font-size) !important;
  letter-spacing: var(--channel-list-letter-spacing) !important;
  line-height: var(--channel-list-line-height) !important;
  font-weight: normal !important;
  -webkit-font-smoothing: antialiased !important;
  text-rendering: optimizeLegibility !important;
}

/* ğŸ­ åˆ†ç»„æ ‡é¢˜å­—ä½“ä¼˜åŒ– */
.section-title,
.section-toggle,
.section-header {
  font-family: var(--channel-list-cjk-font) !important;
  font-size: var(--channel-section-title-font-size) !important;
  letter-spacing: var(--channel-list-letter-spacing) !important;
  -webkit-font-smoothing: antialiased !important;
  text-rendering: optimizeLegibility !important;
}

/* ğŸ”¤ ç‰¹å®šè¯­è¨€ä¼˜åŒ– */

/* ğŸ‡¯ğŸ‡µ æ—¥è¯­é¢‘é“åç§°ä¼˜åŒ– */
.channel-item .name-text:lang(ja),
.channel-item .name-text[lang="ja"],
.channel-name[lang="ja"],
.channel-title:lang(ja),
.channel-title[lang="ja"] {
  font-family: var(--japanese-channel-font-family, 
    'Hiragino Kaku Gothic ProN', 'Yu Gothic Medium', 'Meiryo', 
    'Source Han Sans JP', 'Noto Sans CJK JP', -apple-system, BlinkMacSystemFont, sans-serif) !important;
  letter-spacing: 0.025em !important;
  line-height: 1.6 !important;
  font-weight: 500 !important;
  word-break: keep-all !important;
  overflow-wrap: break-word !important;
}

/* ğŸ‡¨ğŸ‡³ ä¸­æ–‡é¢‘é“åç§°ä¼˜åŒ– */
.channel-item .name-text:lang(zh),
.channel-item .name-text[lang="zh"],
.channel-item .name-text[lang="zh-CN"],
.channel-item .name-text[lang="zh-Hans"],
.channel-name[lang="zh"],
.channel-title:lang(zh),
.channel-title[lang="zh-CN"] {
  font-family: var(--font-family-chinese-simplified, 
    'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 
    'Source Han Sans SC', 'Noto Sans CJK SC', -apple-system, BlinkMacSystemFont, sans-serif) !important;
  letter-spacing: 0.01em !important;
  line-height: 1.65 !important;
  font-weight: 500 !important;
}

/* ğŸ‡°ğŸ‡· éŸ©è¯­é¢‘é“åç§°ä¼˜åŒ– */
.channel-item .name-text:lang(ko),
.channel-item .name-text[lang="ko"],
.channel-name[lang="ko"],
.channel-title:lang(ko) {
  font-family: var(--font-family-korean, 
    'Apple SD Gothic Neo', 'Malgun Gothic', 'Source Han Sans KR', 
    'Noto Sans CJK KR', -apple-system, BlinkMacSystemFont, sans-serif) !important;
  letter-spacing: 0.015em !important;
  line-height: 1.6 !important;
  font-weight: 500 !important;
}

/* ğŸ“± ç›´æ¥æ¶ˆæ¯ (DM) å­—ä½“ä¼˜åŒ– */
.dm-item .name-text,
.dm-name,
.user-name {
  font-family: var(--channel-list-cjk-font) !important;
  font-size: var(--channel-name-font-size) !important;
  letter-spacing: var(--channel-list-letter-spacing) !important;
  line-height: var(--channel-list-line-height) !important;
  font-weight: var(--channel-list-font-weight) !important;
  -webkit-font-smoothing: antialiased !important;
  text-rendering: optimizeLegibility !important;
}

/* ğŸ‘¥ ç¾¤ç»„åç§°å­—ä½“ä¼˜åŒ– */
.group-item .name-text,
.group-name {
  font-family: var(--channel-list-cjk-font) !important;
  font-size: var(--channel-name-font-size) !important;
  letter-spacing: var(--channel-list-letter-spacing) !important;
  line-height: var(--channel-list-line-height) !important;
  font-weight: var(--channel-list-font-weight) !important;
  -webkit-font-smoothing: antialiased !important;
  text-rendering: optimizeLegibility !important;
}

/* ğŸ¨ æ¶ˆæ¯é¢„è§ˆä¸­çš„CJKå†…å®¹ä¼˜åŒ– - FIXED: æ˜ç¡®å­—ä½“å¤§å° */
.last-message .message-content:lang(ja),
.last-message .message-content[lang="ja"] {
  font-family: var(--japanese-channel-font-family) !important;
  font-size: var(--channel-message-preview-font-size) !important;
  letter-spacing: 0.025em !important;
  line-height: 1.6 !important;
  font-weight: normal !important;
}

.last-message .message-content:lang(zh),
.last-message .message-content[lang="zh"],
.last-message .message-content[lang="zh-CN"] {
  font-family: var(--font-family-chinese-simplified) !important;
  font-size: var(--channel-message-preview-font-size) !important;
  letter-spacing: 0.01em !important;
  line-height: 1.65 !important;
  font-weight: normal !important;
}

.last-message .message-content:lang(ko),
.last-message .message-content[lang="ko"] {
  font-family: var(--font-family-korean) !important;
  font-size: var(--channel-message-preview-font-size) !important;
  letter-spacing: 0.015em !important;
  line-height: 1.6 !important;
  font-weight: normal !important;
}

/* ğŸš¨ å¼ºåˆ¶åº”ç”¨ä¿®å¤ç±» */
.channel-list-cjk-optimized,
.force-channel-cjk-font {
  font-family: var(--channel-list-cjk-font) !important;
  letter-spacing: var(--channel-list-letter-spacing) !important;
  line-height: var(--channel-list-line-height) !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  text-rendering: optimizeLegibility !important;
}

/* ğŸ”§ ç¡®ä¿emojiä¿®å¤ä¸å½±å“é¢‘é“åˆ—è¡¨ */
.channel-list .emoji-2x:lang(ja),
.channel-list .emoji-2x:lang(zh),
.channel-list .emoji-2x:lang(ko),
.channel-item .emoji-2x[lang="ja"],
.channel-item .emoji-2x[lang="zh"],
.channel-item .emoji-2x[lang="ko"] {
  font-size: inherit !important;
  line-height: inherit !important;
  margin: 0 !important;
  display: inline !important;
  vertical-align: baseline !important;
  font-family: inherit !important;
}

/* ğŸ¯ NEW: æ›´ç²¾ç¡®çš„é¢‘é“åˆ—è¡¨æ¶ˆæ¯é¢„è§ˆæ§åˆ¶ */
.channel-item .last-message,
.dm-item .last-message,
.group-item .last-message {
  font-size: var(--channel-message-preview-font-size) !important;
  font-weight: normal !important;
  line-height: 1.4 !important;
  color: rgba(255, 255, 255, 0.6) !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}

.channel-item .last-message .message-sender,
.dm-item .last-message .message-sender,
.group-item .last-message .message-sender {
  font-size: var(--channel-message-preview-font-size) !important;
  font-weight: 500 !important;
  color: rgba(255, 255, 255, 0.7) !important;
}

.channel-item .last-message .message-content,
.dm-item .last-message .message-content,
.group-item .last-message .message-content {
  font-size: var(--channel-message-preview-font-size) !important;
  font-weight: normal !important;
  color: rgba(255, 255, 255, 0.6) !important;
}

.channel-item .last-message .message-time,
.dm-item .last-message .message-time,
.group-item .last-message .message-time {
  font-size: 11px !important;
  font-weight: normal !important;
  color: rgba(255, 255, 255, 0.4) !important;
}

/* ğŸ“± å“åº”å¼é¢‘é“åˆ—è¡¨å­—ä½“ä¼˜åŒ– */
@media (max-width: 768px) {
  :root {
    --channel-list-letter-spacing: 0.015em;
    --channel-list-line-height: 1.5;
  }
  
  .channel-item .name-text {
    font-size: 15px !important;
  }
}

@media (max-width: 480px) {
  :root {
    --channel-list-letter-spacing: 0.02em;
    --channel-list-line-height: 1.6;
  }
  
  .channel-item .name-text {
    font-size: 16px !important;
  }
}

/* ğŸŒ™ æš—è‰²ä¸»é¢˜é¢‘é“åˆ—è¡¨ä¼˜åŒ– */
@media (prefers-color-scheme: dark) {
  :root {
    --channel-list-font-weight: 450; /* æš—è‰²ä¸»é¢˜ä¸‹ç¨å¾®å¢åŠ å­—é‡ */
  }
  
  .channel-list,
  .channel-item .name-text {
    -webkit-font-smoothing: subpixel-antialiased !important;
  }
}

/* ğŸ–¨ï¸ é«˜åˆ†è¾¨ç‡å±å¹•ä¼˜åŒ– */
@media (min-resolution: 2dppx) {
  .channel-list,
  .channel-item .name-text {
    -webkit-font-smoothing: subpixel-antialiased !important;
    text-rendering: geometricPrecision !important;
  }
}

/* ğŸ¯ é«˜å¯¹æ¯”åº¦æ¨¡å¼ */
@media (prefers-contrast: high) {
  :root {
    --channel-list-font-weight: 600;
  }
  
  .channel-item .name-text {
    letter-spacing: calc(var(--channel-list-letter-spacing) + 0.005em) !important;
  }
}

/* ğŸš¨ CRITICAL: æœ€é«˜ä¼˜å…ˆçº§é‡ç½® - ç¡®ä¿æ¶ˆæ¯é¢„è§ˆä¸è¢«æ”¾å¤§ */
.channel-item .last-message,
.channel-item .last-message *,
.dm-item .last-message,
.dm-item .last-message *,
.group-item .last-message,
.group-item .last-message * {
  font-size: 12px !important;
  font-weight: normal !important;
  line-height: 1.4 !important;
  margin: 0 !important;
  display: inline !important;
  vertical-align: baseline !important;
}

/* ğŸš¨ CRITICAL: é˜²æ­¢emojiã€æ•°å­—ã€ç¬¦å·ä¼˜åŒ–å½±å“é¢‘é“åˆ—è¡¨ */
.channel-list .emoji-2x,
.channel-list *[class*="emoji"],
.channel-list .numbers-not-emoji,
.channel-list .symbols-not-emoji,
.channel-list .ascii-not-emoji,
.channel-item .emoji-2x,
.channel-item *[class*="emoji"],
.channel-item .numbers-not-emoji,
.channel-item .symbols-not-emoji,
.channel-item .ascii-not-emoji,
.dm-item .emoji-2x,
.dm-item *[class*="emoji"],
.dm-item .numbers-not-emoji,
.dm-item .symbols-not-emoji,
.dm-item .ascii-not-emoji,
.group-item .emoji-2x,
.group-item *[class*="emoji"],
.group-item .numbers-not-emoji,
.group-item .symbols-not-emoji,
.group-item .ascii-not-emoji {
  font-size: inherit !important;
  line-height: inherit !important;
  margin: 0 !important;
  display: inline !important;
  vertical-align: baseline !important;
}

/* ğŸ¯ é¢‘é“åç§°æ˜ç¡®æ§åˆ¶ */
.channel-item .name-text,
.dm-item .name-text,
.group-item .name-text {
  font-size: 14px !important;
  font-weight: 500 !important;
  line-height: 1.4 !important;
}

/* ğŸ“ æ¶ˆæ¯é¢„è§ˆæ˜ç¡®æ§åˆ¶ */
.channel-item .last-message .message-sender {
  font-size: 12px !important;
  font-weight: 500 !important;
  color: rgba(255, 255, 255, 0.7) !important;
}

.channel-item .last-message .message-content {
  font-size: 12px !important;
  font-weight: normal !important;
  color: rgba(255, 255, 255, 0.6) !important;
}

.channel-item .last-message .message-time {
  font-size: 11px !important;
  font-weight: normal !important;
  color: rgba(255, 255, 255, 0.4) !important;
} 