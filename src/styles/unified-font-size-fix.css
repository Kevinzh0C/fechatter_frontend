/* ğŸ¯ Unified Font Size Fix - ç»Ÿä¸€å­—ä½“å¤§å°ä¿®å¤
 * è§£å†³å­—ä½“å¤§å°é”™ä¹±é—®é¢˜ï¼Œç¡®ä¿æ‰€æœ‰æ¶ˆæ¯ç»„ä»¶å­—ä½“å¤§å°ä¸€è‡´
 * åŸºäºDiscordæ ‡å‡†ï¼Œæä¾›ç»Ÿä¸€çš„å­—ä½“å¤§å°ä½“ç³»
 */

:root {
  /* ğŸ¯ ç»Ÿä¸€å­—ä½“å¤§å°ç³»ç»Ÿ - Discordæ ‡å‡† */
  --unified-font-size-base: 15px;          /* åŸºç¡€å­—ä½“å¤§å° - æ¶ˆæ¯å†…å®¹ */
  --unified-font-size-username: 14px;      /* ç”¨æˆ·åå­—ä½“å¤§å° */
  --unified-font-size-timestamp: 12px;     /* æ—¶é—´æˆ³å­—ä½“å¤§å° */
  --unified-font-size-small: 12px;         /* å°å·å­—ä½“ */
  --unified-font-size-large: 16px;         /* å¤§å·å­—ä½“ */
  
  /* ğŸ¯ è¡Œé«˜ç³»ç»Ÿ */
  --unified-line-height-base: 1.5;         /* åŸºç¡€è¡Œé«˜ */
  --unified-line-height-compact: 1.4;      /* ç´§å‡‘è¡Œé«˜ */
  --unified-line-height-relaxed: 1.6;      /* æ”¾æ¾è¡Œé«˜ */
  
  /* ğŸ¯ å­—é‡ç³»ç»Ÿ */
  --unified-font-weight-normal: 400;       /* æ­£å¸¸å­—é‡ */
  --unified-font-weight-medium: 500;       /* ä¸­ç­‰å­—é‡ */
  --unified-font-weight-semibold: 600;     /* åŠç²—å­—é‡ */
}

/* ğŸ”§ å¼ºåˆ¶ç»Ÿä¸€å­—ä½“å¤§å° - æœ€é«˜ä¼˜å…ˆçº§ */

/* æ¶ˆæ¯å†…å®¹ç»Ÿä¸€å­—ä½“å¤§å° */
.discord-message-item,
.message-item,
.chat-message,
.message-content,
.message-text,
.content-wrapper {
  font-size: var(--unified-font-size-base) !important;
  line-height: var(--unified-line-height-base) !important;
  font-weight: var(--unified-font-weight-normal) !important;
}

/* æ¶ˆæ¯å†…å®¹æ·±åº¦é€‰æ‹©å™¨ */
.content-wrapper :deep(p),
.content-wrapper :deep(div),
.content-wrapper :deep(span),
.message-content p,
.message-content div,
.message-content span {
  font-size: var(--unified-font-size-base) !important;
  line-height: var(--unified-line-height-base) !important;
  font-weight: var(--unified-font-weight-normal) !important;
}

/* ç”¨æˆ·åç»Ÿä¸€å­—ä½“å¤§å° */
.username-button,
.sender-name,
.user-name,
.author-name {
  font-size: var(--unified-font-size-username) !important;
  line-height: var(--unified-line-height-compact) !important;
  font-weight: var(--unified-font-weight-medium) !important;
}

/* æ—¶é—´æˆ³ç»Ÿä¸€å­—ä½“å¤§å° */
time,
.timestamp,
.message-timestamp,
.time-display {
  font-size: var(--unified-font-size-timestamp) !important;
  line-height: var(--unified-line-height-compact) !important;
  font-weight: var(--unified-font-weight-normal) !important;
}

/* ğŸ¯ ç‰¹å®šç»„ä»¶å­—ä½“å¤§å°ä¿®å¤ */

/* DiscordMessageItem å¼ºåˆ¶ç»Ÿä¸€ */
.discord-message-item .username-button {
  font-size: var(--unified-font-size-username) !important;
  font-weight: var(--unified-font-weight-medium) !important;
  line-height: var(--unified-line-height-compact) !important;
}

.discord-message-item .content-wrapper {
  font-size: var(--unified-font-size-base) !important;
  line-height: var(--unified-line-height-base) !important;
  font-weight: var(--unified-font-weight-normal) !important;
}

.discord-message-item time {
  font-size: var(--unified-font-size-timestamp) !important;
  line-height: var(--unified-line-height-compact) !important;
  font-weight: var(--unified-font-weight-normal) !important;
}

/* ğŸ”§ è¦†ç›–ä»»ä½•å†²çªçš„å­—ä½“å¤§å°è®¾ç½® */

/* è¦†ç›–scopedæ ·å¼ä¸­çš„å­—ä½“å¤§å° */
.message-content {
  font-size: var(--unified-font-size-base) !important;
  line-height: var(--unified-line-height-base) !important;
}

/* è¦†ç›–inlineæ ·å¼å’Œå…¶ä»–ä¼˜å…ˆçº§è®¾ç½® */
[style*="font-size"] {
  font-size: var(--unified-font-size-base) !important;
}

/* ç‰¹æ®Šå…ƒç´ ä¿æŒåŸæœ‰å¤§å° */
.file-size-clean,
.hash-indicator,
.file-extension {
  /* æ–‡ä»¶ç›¸å…³ä¿¡æ¯ä¿æŒè¾ƒå°å­—ä½“ */
  font-size: var(--unified-font-size-small) !important;
}

/* ğŸ¯ Markdownå†…å®¹ç»Ÿä¸€ */
.content-wrapper :deep(h1),
.content-wrapper :deep(h2),
.content-wrapper :deep(h3),
.content-wrapper :deep(h4),
.content-wrapper :deep(h5),
.content-wrapper :deep(h6) {
  font-size: var(--unified-font-size-large) !important;
  line-height: var(--unified-line-height-compact) !important;
  font-weight: var(--unified-font-weight-semibold) !important;
}

.content-wrapper :deep(strong) {
  font-size: inherit !important;
  font-weight: var(--unified-font-weight-semibold) !important;
}

.content-wrapper :deep(em) {
  font-size: inherit !important;
  font-style: italic;
}

.content-wrapper :deep(a) {
  font-size: inherit !important;
  font-weight: var(--unified-font-weight-medium) !important;
}

.content-wrapper :deep(code:not(.hljs code)) {
  font-size: calc(var(--unified-font-size-base) - 1px) !important;
  line-height: var(--unified-line-height-compact) !important;
}

/* ğŸ¯ åˆ—è¡¨é¡¹ç»Ÿä¸€ */
.content-wrapper :deep(li) {
  font-size: var(--unified-font-size-base) !important;
  line-height: var(--unified-line-height-base) !important;
}

/* ğŸ¯ å¼•ç”¨å—ç»Ÿä¸€ */
.content-wrapper :deep(blockquote) {
  font-size: var(--unified-font-size-base) !important;
  line-height: var(--unified-line-height-base) !important;
}

/* ğŸ“± å“åº”å¼å­—ä½“å¤§å° - ä¿æŒæ¯”ä¾‹ä¸€è‡´ */
@media (max-width: 768px) {
  :root {
    --unified-font-size-base: 15px;      /* ç§»åŠ¨ç«¯ä¿æŒä¸€è‡´ */
    --unified-font-size-username: 14px;  /* ç§»åŠ¨ç«¯ä¿æŒä¸€è‡´ */
    --unified-font-size-timestamp: 12px; /* ç§»åŠ¨ç«¯ä¿æŒä¸€è‡´ */
  }
}

@media (max-width: 480px) {
  :root {
    --unified-font-size-base: 16px;      /* å°å±å¹•ç¨å¾®å¢å¤§ */
    --unified-font-size-username: 15px;  /* å°å±å¹•ç¨å¾®å¢å¤§ */
    --unified-font-size-timestamp: 13px; /* å°å±å¹•ç¨å¾®å¢å¤§ */
  }
}

/* ğŸŒ™ æš—è‰²ä¸»é¢˜å­—ä½“å¤§å°ä¿æŒä¸€è‡´ */
@media (prefers-color-scheme: dark) {
  :root {
    /* æš—è‰²ä¸»é¢˜ä¸‹å­—ä½“å¤§å°ä¸å˜ */
    --unified-font-size-base: 15px;
    --unified-font-size-username: 14px;
    --unified-font-size-timestamp: 12px;
  }
}

/* ğŸ¯ é«˜å¯¹æ¯”åº¦æ¨¡å¼å­—ä½“å¢å¼º */
@media (prefers-contrast: high) {
  :root {
    --unified-font-weight-normal: 500;   /* é«˜å¯¹æ¯”åº¦ä¸‹å¢åŠ å­—é‡ */
    --unified-font-weight-medium: 600;
    --unified-font-weight-semibold: 700;
  }
}

/* ğŸ”§ ç‰¹æ®Šæƒ…å†µè¦†ç›– */

/* âš ï¸ EMOJIå¤„ç†äº¤ç»™numbers-harmonization.csså¤„ç†ï¼Œé¿å…å†²çª */
/* ä¸åœ¨è¿™é‡Œè®¾ç½®emojiå¤§å° */

/* ğŸ‡¯ğŸ‡µğŸ‡¨ğŸ‡³ğŸ‡°ğŸ‡· ç¡®ä¿CJKå­—ç¬¦ä¿æŒæ­£å¸¸å­—ä½“å¤§å° */
.emoji-2x:lang(ja),
.emoji-2x:lang(zh),
.emoji-2x:lang(ko),
.emoji-2x[lang="ja"],
.emoji-2x[lang="zh"],
.emoji-2x[lang="ko"] {
  font-size: var(--unified-font-size-base) !important; /* æ¢å¤æ­£å¸¸å­—ä½“å¤§å° */
  line-height: var(--unified-line-height-base) !important;
  margin: 0 !important;
}

/* ä»£ç å—ä¿æŒç­‰å®½å­—ä½“ï¼Œä½†ç»Ÿä¸€å¤§å° */
.hljs,
.code-block,
pre {
  font-size: calc(var(--unified-font-size-base) - 1px) !important;
  line-height: var(--unified-line-height-compact) !important;
}

/* ğŸ¯ Vueç»„ä»¶æ·±åº¦æ ·å¼ä¿®å¤ */
* :deep(.message-content),
* :deep(.content-wrapper),
* :deep(.message-text),
* :deep(.discord-message-item) {
  font-size: var(--unified-font-size-base) !important;
  line-height: var(--unified-line-height-base) !important;
}

* :deep(.username-button),
* :deep(.sender-name) {
  font-size: var(--unified-font-size-username) !important;
  line-height: var(--unified-line-height-compact) !important;
}

/* ğŸš¨ æœ€é«˜ä¼˜å…ˆçº§ä¿®å¤ - è¦†ç›–ä»»ä½•æ ·å¼ */
.force-unified-font-size {
  font-size: var(--unified-font-size-base) !important;
  line-height: var(--unified-line-height-base) !important;
  font-weight: var(--unified-font-weight-normal) !important;
} 