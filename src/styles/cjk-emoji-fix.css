/* ğŸ”§ CJK Emoji Fix - CJKå­—ç¬¦ä¸Emojiåˆ†ç¦»ä¿®å¤
 * è§£å†³æ—¥è¯­å‡åè¢«è¯¯è¯†åˆ«ä¸ºemojiè€Œæ”¾å¤§çš„é—®é¢˜
 * ç¡®ä¿CJKå­—ç¬¦ä¿æŒæ­£å¸¸å­—ä½“å¤§å°å’Œæ˜¾ç¤º
 */

:root {
  /* ğŸ¯ CJKå­—ç¬¦æ­£å¸¸åŒ–å‚æ•° */
  --cjk-normal-font-size: inherit;
  --cjk-normal-line-height: inherit;
  --cjk-normal-margin: 0;
}

/* ğŸš¨ CRITICAL FIX: å¼ºåˆ¶ç§»é™¤CJKå­—ç¬¦çš„emojiæ ·å¼ */

/* æ—¥è¯­å­—ç¬¦åemojiæ±¡æŸ“ */
span.emoji-2x:lang(ja),
span.emoji-2x[lang="ja"],
.emoji-2x:lang(ja),
.emoji-2x[lang="ja"],
*[class*="emoji"]:lang(ja),
*[class*="emoji"][lang="ja"] {
  font-size: var(--unified-font-size-base, 15px) !important;
  line-height: var(--unified-line-height-base, 1.5) !important;
  margin: 0 !important;
  display: inline !important;
  vertical-align: baseline !important;
  font-family: var(--japanese-channel-font-family, 'Hiragino Kaku Gothic ProN', 'Yu Gothic Medium') !important;
  letter-spacing: var(--japanese-letter-spacing-channel, 0.025em) !important;
}

/* ä¸­æ–‡å­—ç¬¦åemojiæ±¡æŸ“ */
span.emoji-2x:lang(zh),
span.emoji-2x[lang="zh"],
span.emoji-2x[lang="zh-CN"],
span.emoji-2x[lang="zh-Hans"],
.emoji-2x:lang(zh),
.emoji-2x[lang="zh"],
.emoji-2x[lang="zh-CN"],
.emoji-2x[lang="zh-Hans"],
*[class*="emoji"]:lang(zh),
*[class*="emoji"][lang="zh"],
*[class*="emoji"][lang="zh-CN"],
*[class*="emoji"][lang="zh-Hans"] {
  font-size: var(--unified-font-size-base, 15px) !important;
  line-height: var(--unified-line-height-base, 1.5) !important;
  margin: 0 !important;
  display: inline !important;
  vertical-align: baseline !important;
  font-family: var(--font-family-chinese-simplified, 'PingFang SC', 'Microsoft YaHei') !important;
  letter-spacing: 0.01em !important;
}

/* éŸ©è¯­å­—ç¬¦åemojiæ±¡æŸ“ */
span.emoji-2x:lang(ko),
span.emoji-2x[lang="ko"],
.emoji-2x:lang(ko),
.emoji-2x[lang="ko"],
*[class*="emoji"]:lang(ko),
*[class*="emoji"][lang="ko"] {
  font-size: var(--unified-font-size-base, 15px) !important;
  line-height: var(--unified-line-height-base, 1.5) !important;
  margin: 0 !important;
  display: inline !important;
  vertical-align: baseline !important;
  font-family: var(--font-family-korean, 'Apple SD Gothic Neo', 'Malgun Gothic') !important;
  letter-spacing: 0.015em !important;
}

/* ğŸ”§ åŸºäºUnicodeèŒƒå›´çš„ç²¾ç¡®ä¿®å¤ */

/* å¹³å‡åèŒƒå›´ä¿®å¤ (U+3040-U+309F) */
.emoji-2x[data-hiragana],
.emoji-2x:contains('ã‚'),
.emoji-2x:contains('ã„'),
.emoji-2x:contains('ã†'),
.emoji-2x:contains('ãˆ'),
.emoji-2x:contains('ãŠ'),
.emoji-2x:contains('ã‹'),
.emoji-2x:contains('ã'),
.emoji-2x:contains('ã'),
.emoji-2x:contains('ã‘'),
.emoji-2x:contains('ã“'),
.emoji-2x:contains('ã•'),
.emoji-2x:contains('ã—'),
.emoji-2x:contains('ã™'),
.emoji-2x:contains('ã›'),
.emoji-2x:contains('ã'),
.emoji-2x:contains('ãŸ'),
.emoji-2x:contains('ã¡'),
.emoji-2x:contains('ã¤'),
.emoji-2x:contains('ã¦'),
.emoji-2x:contains('ã¨'),
.emoji-2x:contains('ãª'),
.emoji-2x:contains('ã«'),
.emoji-2x:contains('ã¬'),
.emoji-2x:contains('ã­'),
.emoji-2x:contains('ã®'),
.emoji-2x:contains('ã¯'),
.emoji-2x:contains('ã²'),
.emoji-2x:contains('ãµ'),
.emoji-2x:contains('ã¸'),
.emoji-2x:contains('ã»'),
.emoji-2x:contains('ã¾'),
.emoji-2x:contains('ã¿'),
.emoji-2x:contains('ã‚€'),
.emoji-2x:contains('ã‚'),
.emoji-2x:contains('ã‚‚'),
.emoji-2x:contains('ã‚„'),
.emoji-2x:contains('ã‚†'),
.emoji-2x:contains('ã‚ˆ'),
.emoji-2x:contains('ã‚‰'),
.emoji-2x:contains('ã‚Š'),
.emoji-2x:contains('ã‚‹'),
.emoji-2x:contains('ã‚Œ'),
.emoji-2x:contains('ã‚'),
.emoji-2x:contains('ã‚'),
.emoji-2x:contains('ã‚’'),
.emoji-2x:contains('ã‚“') {
  font-size: var(--unified-font-size-base, 15px) !important;
  line-height: var(--unified-line-height-base, 1.5) !important;
  margin: 0 !important;
  display: inline !important;
  vertical-align: baseline !important;
  font-family: var(--japanese-channel-font-family) !important;
  letter-spacing: var(--japanese-letter-spacing-channel, 0.025em) !important;
}

/* ç‰‡å‡åèŒƒå›´ä¿®å¤ (U+30A0-U+30FF) */
.emoji-2x:contains('ã‚¢'),
.emoji-2x:contains('ã‚¤'),
.emoji-2x:contains('ã‚¦'),
.emoji-2x:contains('ã‚¨'),
.emoji-2x:contains('ã‚ª'),
.emoji-2x:contains('ã‚«'),
.emoji-2x:contains('ã‚­'),
.emoji-2x:contains('ã‚¯'),
.emoji-2x:contains('ã‚±'),
.emoji-2x:contains('ã‚³'),
.emoji-2x:contains('ã‚µ'),
.emoji-2x:contains('ã‚·'),
.emoji-2x:contains('ã‚¹'),
.emoji-2x:contains('ã‚»'),
.emoji-2x:contains('ã‚½'),
.emoji-2x:contains('ã‚¿'),
.emoji-2x:contains('ãƒ'),
.emoji-2x:contains('ãƒ„'),
.emoji-2x:contains('ãƒ†'),
.emoji-2x:contains('ãƒˆ'),
.emoji-2x:contains('ãƒŠ'),
.emoji-2x:contains('ãƒ‹'),
.emoji-2x:contains('ãƒŒ'),
.emoji-2x:contains('ãƒ'),
.emoji-2x:contains('ãƒ'),
.emoji-2x:contains('ãƒ'),
.emoji-2x:contains('ãƒ’'),
.emoji-2x:contains('ãƒ•'),
.emoji-2x:contains('ãƒ˜'),
.emoji-2x:contains('ãƒ›'),
.emoji-2x:contains('ãƒ'),
.emoji-2x:contains('ãƒŸ'),
.emoji-2x:contains('ãƒ '),
.emoji-2x:contains('ãƒ¡'),
.emoji-2x:contains('ãƒ¢'),
.emoji-2x:contains('ãƒ¤'),
.emoji-2x:contains('ãƒ¦'),
.emoji-2x:contains('ãƒ¨'),
.emoji-2x:contains('ãƒ©'),
.emoji-2x:contains('ãƒª'),
.emoji-2x:contains('ãƒ«'),
.emoji-2x:contains('ãƒ¬'),
.emoji-2x:contains('ãƒ­'),
.emoji-2x:contains('ãƒ¯'),
.emoji-2x:contains('ãƒ²'),
.emoji-2x:contains('ãƒ³') {
  font-size: var(--unified-font-size-base, 15px) !important;
  line-height: var(--unified-line-height-base, 1.5) !important;
  margin: 0 !important;
  display: inline !important;
  vertical-align: baseline !important;
  font-family: var(--japanese-channel-font-family) !important;
  letter-spacing: var(--japanese-letter-spacing-channel, 0.025em) !important;
}

/* ğŸ¯ å¼ºåˆ¶è¦†ç›–ä»»ä½•emojiç±»å¯¹CJKå­—ç¬¦çš„å½±å“ */
.content-wrapper .emoji-2x,
.message-content-wrapper .emoji-2x,
.message-content .emoji-2x {
  /* æ£€æŸ¥å†…å®¹æ˜¯å¦ä¸ºCJKå­—ç¬¦ */
}

/* ğŸ”§ JavaScriptè¾…åŠ©æ£€æµ‹ç±» */
.cjk-not-emoji {
  font-size: var(--unified-font-size-base, 15px) !important;
  line-height: var(--unified-line-height-base, 1.5) !important;
  margin: 0 !important;
  display: inline !important;
  vertical-align: baseline !important;
  letter-spacing: var(--cjk-letter-spacing, 0.015em) !important;
}

.japanese-not-emoji {
  font-family: var(--japanese-channel-font-family) !important;
  letter-spacing: var(--japanese-letter-spacing-channel, 0.025em) !important;
}

.chinese-not-emoji {
  font-family: var(--font-family-chinese-simplified) !important;
  letter-spacing: 0.01em !important;
}

.korean-not-emoji {
  font-family: var(--font-family-korean) !important;
  letter-spacing: 0.015em !important;
}

/* ğŸš¨ ç´§æ€¥è¦†ç›–ï¼šç§»é™¤æ‰€æœ‰emojiæ•ˆæœä»CJKå…ƒç´  */
*[class*="emoji"][lang="ja"] *,
*[class*="emoji"][lang="zh"] *,
*[class*="emoji"][lang="ko"] *,
.emoji-2x[lang="ja"] *,
.emoji-2x[lang="zh"] *,
.emoji-2x[lang="ko"] * {
  font-size: inherit !important;
  line-height: inherit !important;
  margin: 0 !important;
  display: inline !important;
  vertical-align: baseline !important;
}

/* ğŸ¯ ç¡®ä¿çœŸæ­£çš„emojiä¿æŒæ”¾å¤§æ•ˆæœ */
.emoji-2x:not([lang="ja"]):not([lang="zh"]):not([lang="ko"]):not([class*="cjk"]):not([class*="japanese"]):not([class*="chinese"]):not([class*="korean"]) {
  font-size: 1.25em !important;
  line-height: 1.2 !important;
  vertical-align: middle !important;
  display: inline-block !important;
  margin: 0 0.1em !important;
}

/* ğŸ” è°ƒè¯•è¾…åŠ© - å¼€å‘ç¯å¢ƒå¯è§†åŒ– */
@media screen and (min-width: 0) {
  .debug-cjk-emoji-fix .emoji-2x[lang="ja"],
  .debug-cjk-emoji-fix .emoji-2x[lang="zh"],
  .debug-cjk-emoji-fix .emoji-2x[lang="ko"] {
    outline: 2px solid #ff0000 !important;
    background: rgba(255, 0, 0, 0.1) !important;
  }
  
  .debug-cjk-emoji-fix .emoji-2x[lang="ja"]::after {
    content: 'æ—¥';
    position: absolute;
    top: -1em;
    right: 0;
    background: #ff0000;
    color: white;
    padding: 1px 3px;
    font-size: 8px;
    border-radius: 2px;
  }
} 